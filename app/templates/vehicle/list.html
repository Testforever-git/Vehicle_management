{% extends 'base.html' %}
{% from 'macros/buttons.html' import action_button with context %}

{% block page_title %}{{ t('vehicle_list.page_title') }}{% endblock %}

{% block content %}
<div class="card p-3 mb-3">
  <div class="row g-2">
    <div class="col-md-3">
      <label class="form-label ac-field-label">{{ t('vehicle_list.brand_label') }}</label>
      <input class="form-control ac-input" placeholder="{{ t('vehicle_list.brand_placeholder') }}">
    </div>
    <div class="col-md-3">
      <label class="form-label ac-field-label">{{ t('vehicle_list.status_label') }}</label>
      <select class="form-select ac-input">
        <option>{{ t('vehicle_list.status_all') }}</option>
        {% for v, label in status_options %}
          <option value="{{ v }}">{{ label }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-6 d-flex align-items-end justify-content-end gap-2">
      <button class="btn btn-primary">{{ t('vehicle_list.search') }}</button>
      <button class="btn btn-outline-secondary">{{ t('vehicle_list.reset') }}</button>
      {{ action_button('vehicle','export', t('vehicle_list.export_csv'), '#', 'outline-secondary') }}
      {{ action_button('vehicle','edit', t('vehicle_list.new_vehicle'), url_for('ui.vehicle_new', lang=lang), 'primary') }}
    </div>
  </div>
</div>

<div class="table-responsive">
  <table class="table table-sm align-middle">
    <thead>
      <tr>
        <th>{{ t('vehicle_list.brand_model') }}</th>
        <th>{{ t('vehicle_list.plate_no') }}</th>
        <th>{{ t('vehicle_list.status') }}</th>
        <th>{{ t('vehicle_list.actions') }}</th>
      </tr>
    </thead>
    <tbody>
      {% for v in vehicles %}
      <tr>
        <td class="ac-text-body">{{ v.brand_jp }} / {{ v.model_jp }}</td>
        <td class="ac-text-body">{{ v.masked_plate_no }}</td>
        <td class="ac-text-body">{{ v.status }}</td>
        <td>
          <a class="btn btn-link btn-sm" href="{{ url_for('ui.vehicle_detail', vehicle_id=v.id, lang=lang) }}">
            {{ t('vehicle_list.view') }}
          </a>
          {{ action_button('vehicle','edit', t('vehicle_list.edit'), url_for('ui.vehicle_edit', vehicle_id=v.id, lang=lang), 'link') }}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<p class="ac-text-meta">{{ t('vehicle_list.total') }}: {{ pagination.total }}</p>
{% endblock %}
